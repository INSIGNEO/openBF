![openBF](https://alemelis.github.io/openbf.jl/images/openBF.svg)

[![INSIGNEO](https://img.shields.io/badge/-INSIGNEO-red.svg?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAQAAAC1QeVaAAABGElEQVQY012QvyvEcRzGH12p4%2BRHKW6Rugz%2BAnUWGQyUVYRBFuVMBgmL%2BBdsZzBQymT1YyDJxiaTG3RX576f1%2FubXPE23I8uz7M9z7vn6XlLkiRPhFmOuObK8t7BbpRRA19D3OF1Rt7GG%2B91Oxojwnm1jZAN49F0ZRjHKYQRFVMUcE4%2BOhs5YYUqt2wzqrCJc%2B%2BJZoeiTKkrTrNuiwqPeJiRJG8Pq%2BzQL0k2hduDiPFytyTZMj%2F2FY4lqdKLE4lv3JOSRI5qgAtJKqZwYvGM22RNsAPL1yaELM6LwhbOuf4hXOJ2qDhthrPWapHDKUV9kmyJX5xTJjz52ROynOH8Mle%2FtAVovs9xsPmWoHiQPW4oU%2BCJfRuoqX8d8dI8uuCeiQAAAABJRU5ErkJggg%3D%3D)](https://insigneo.org/)
[![CompBioMed](https://img.shields.io/badge/-CompBioMed-yellow.svg?logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAD4AAABgCAYAAABFRcHDAAAVEUlEQVR4Ad1cd5BV53W%2FmWScTMokGZeZTEpcMo7HGSeO4xLZlmVJEIqNQbLVwQYjoSIhGVkeeRxbsq0iJAQSoiwFsYAEorO97LIF2F2W7b0su8v2fVv2lXffva%2B%2FX845795dLu%2BZ4cFGvNUfh7u8Mu%2F%2BvlPO75zvfFeJRCIKACUcCipD3bVoOnsIVblbUZ27DY1n3kdv8xm4p0bAn2ExPz%2FXRf4J%2BHSlJn8HsrYtRu7O%2B5C3%2ByHk7XqI%2Fr4XOSl3I3%2FPT9BcfhyhYOA6wUeiEokkF%2FCO6ixkbV2A4vfXoei9Z1B04Gm6itBrzyJ%2F94Ooz34NwYD%2FmoALQJFwfLCI3Hzgfq%2BqlB5%2BHgWpjxDgtSjc%2FzhOizwh17z9z6By3zL4qjdAQAMWMNcCKhL0KpGQTwmM1CHsc5mLc3OBuyaHUbB3NQoF6JMC2JQiAf406t%2B%2FB3rh%2FQj73OZNXxV0JBIWsGHPeE1guAr%2BwQr42o%2FAW5eCCCLJAdxtt6Fw3xqSx2OAs8YzU9eh8eDd8BatQDjoM246HN%2B8Rbu6ole9Ca1oNdT0j8PX%2BgECw9XQz%2F%2FusoUL33xT54BVfupVCWBs6iboQkPjtR%2BswljaAmg530VwrBVxtGUBw%2BbsPqpAzfgCPPk%2FhFbyBLQz6xByDcG0hqQJboNd1Ry9JZiZJp6b%2BhTaj94PX84tBPpO0t7nyFS3IRLymxqOq3Fv3Q6opxQEbI1g7bO5R0IWS0kKmb7phuJ9yNnxIwZPZv%2BEyFj6Iug534GaswhqGoEZbUBcACYX8HsUT8ED8BTcB%2FbxOJ9JGpk2PZ%2FmVs4c%2BZUEuoL9a3H2vUfgzF4MLXch1Mxb4MmZj5C9Ny5w8%2F%2FByS6oJxToFS%2FRSyHzPQadnAQmEg7LdaCjEnk7f4R8SmFVh1bDk%2FbnrGmSv4FWvAaR6eAWiQvc350H92EF3qYDiEltyQx8pLeRgN9LKUwiueTuwGgjQs5BhNhXTS3GN2GK5hvhPqLA31tktYwkFMuNN5TsRx6xtLzUJ9B%2B6jHA74z%2FxTjAOVV5CleIqQdtTckP3NS2c3IIBe%2BuwukDTyF376PoTn8ECKjT4OJo2%2BrfU90U%2BT8JT9YtnLqSH7j5Rz1FdS5QOKrn7VuL%2FqPfRrDtMIIEIhIKWEDG9e9LpVCPKdCKfnoNDC9p8ngVgb7HJDBCXkbTlkDP%2BATc6f8I7dzzCDn6rprKvA17hLhIRI%2BEkx%2B4xzW5nrVckLqGgD%2BF%2FH1PCoGxZ8yHnjMPavZ8IiQfgyfn9hjwJjCO9trZX4jGvY2pSHbQLFKSZm%2F%2FAZWfP2PSIqA7j90HT%2FZtJN8luR2e3CXC3DxcqOhTa0zw5gKE3MP0mQVQTyrwdxckvX8L8Lqivcjddb9BVx%2FH8Kkl8OV8C6qANuU7BOz7QkW5ADG%2FbAa8wHAN1LRP0OL8A4KU%2FuS9ZAfO7aU88u%2F8Az9D1cFV0BgkgbUANzWfs1i0Gug%2Fh8uB%2B1qPyuusddb%2BnNB4d2MxclOWEXAiLYeXE%2FBb44PO%2FG%2B63gEP09e8JeDiwwSvn3%2BF87dUYhHi63PCx%2B1j%2FSjYswK5lMKaDv%2BYAloc4Fm3wpN%2Fj6H1%2F4mafPUmCHHxOqkwuYc0brpB5Ka1lxLpBUp3tTJjA7J2rUT94dWicau2qSTN%2BBK0sl8SsNfp7y9Pm3zQ1oigvZd8%2BxPyf1%2FbMcPMkxe0JY8PtFcgM%2BVeXPjgUahZUcDqFaauZn4dWvHD0M4%2BTeD%2FnUz%2BaxTlyTXKf0MW8c1oDT5Yafr33ADu091KyeFfoWTfSjiyFnKAizF3LkvFxCtfhrf5PdGw%2BHsWCVtF5n8i5Oi%2FCRH9%2BixseqV6Gospn9%2BFsYwfkp9%2Fm4DfHgs88yvi69wp9fcWy0J4yBLUjP%2BA5%2FQqRAL6zQhsJga%2BJg7c63EqBe89i%2B6j34cvl0w960rg8wj4V8GBzOTi3JHRSp%2BG%2B5hZg5ugkx%2B45QtdjaWo2b8A3tw742icmFna30I%2FL1zc0jPnyixG23MBuFmaTtr6cCb1QbizF0C7MsDlLBTT9vcUwkpZ4%2Fra3DF1TmvVuVuRu%2FsnGDm1yMjnptb5egf58ufB2rVEbutW0RwCbgDobz%2BPnO3fk7ZyT%2BZaeDnAZU2nMyOlfQlBe08CKSvJTd2nq8rZYy8ge9v30FR2HEH3yFFP3g84d3OqMsDP5w4Lbyp8dIAPd9dRT%2F0eqs4eg2tq5Ci%2Fpl14Q3yafVtKVA5uTFIGyj86wFvKjyFzywJUZm5EKOAzWkklUZKSs8gAvjBKS9tPfnSA1xXuQebWheDgFjb6a8GJTjLtT7GpG80I4udpf2qpxxGJzG3gDSUHpAtz7sTvwPvl0lVxDlBw%2By%2FxbylHsyjYpX8GnrPrEA56PxrAu%2BryZewj%2F92VmBjsgLCyyYtQM%2F7F4OO3wl20Eq7KF%2BFoeBtBo%2F0UmevAJ4cvSk%2Bdt4qrst9GhIFfKhIq6i5eDWf1K3A0pcDZvBOO%2Bo3wuyzFyNwFHgr6lfPpb4jG8%2FasQsf5Y9DLfw3nmSfhaE4h2QFn41Y46WqvfxPesSbMeVM3tTZ6qRm5KUuJwKxF1fv3w1X1WzhadjFgki0G%2BG1wFd1Pkf3EnAdu%2BXDTuSNk8j%2BBrXozXK1k1g1b4GzaFgVd9RLUwgegHlfgrd8994Gbvmo2JEart8DdTGDFtFPk6qKuiyfTaDikfQx6zWZYBn7mKnDz5vWRC3A1vk1gt4k%2FO%2Bvfgvv0CngyvsIkxsjlfwa9cr2UpvJDkbkK3PhwwD1MgWsDgd4SBV33JtS8paTpr4qmZ2ryT0Gv%2BO1lmwqyAHPV1COK2p0BBwF3ckCrfxtq%2Ft3RhmL2PBKzAXkntKyvwZG3HKM9tfD79Mt%2BPDz3gAfUEQpkb1Eg2w4HBTN3yZqoeecIaFOkTNVzbsNE%2Bp3I3%2FUjlB75X%2FS3lWPmh8NzC7g%2BXAlH3eti4q7GrezLTFGZqlqBE2fXqe8%2BmbEAJe89hYLUx6iGX4r64lQE%2FF4T%2FNxJZ%2B6uk6xxYWW6rZbS1S6zJI0BrhHwqczFKEpdRd2aFSg%2B%2BKzw%2FOq8bdMFTmQudFnDQV1xtaYySRGt%2B8nsQ1O9FMT%2ByPBvs%2F10W3T7KP3T0M4%2BD%2Bd4HxpKDzLHJ%2FA%2FpybGEnTW5GDOAA9Rj9xpUFIH0VG%2Fs1%2F2v7TStQTy8wJ2BvgisQRv7fbpqN5Vm0vgeZv5GaG8jvEBk8fPAeBNKczQJKr7JtogZKb5ADwEUstbDI0Cmgj7PndhunNN4CI1BTsI9CoZ7ucTDjM3EUliUw%2BIqZOPv0PgN2Oq6QRG2rsxcPogejYr6NlxG3pSbiH5Jsmt6HnnrzFYepI%2B04WhxgbY2jvReS4vOvq97zEZMNDcZtkaTu6orl5MI21vIuBk7o3b4ddUxTc5MM9x8otwnroVzrTbSe6A4%2BQ34EyfD9%2FUEAL%2BkBLQNSXg9ZHoyoXszVTWrpTJqaGLNZgTwL22eiOd7ZKr18Y3HlL00sfhyfw3MvEFJOTrGZ%2BGTtvFQCyg%2Fs7z5nkWMvcPcJOCG8s1AzcC3E6mq0JiOK15J1qg17wjkw5MVc09cW%2FzjA%2BbOzAsfQ3nyceXi8lXpK1HMOAzbya5ubp3vAX22ldhRnheBFfdRripFJWJiMxvRdvLI3VR4KGgfC8cDinDjU0Yaq7HueMvSBen%2BOA68BiZae5JqvGZD2oDpQT%2BFdG6SV%2BdJK6a1%2BAufQwe6rtFjJ1SFp%2FHo1yqKId7bEz%2BX5m1iUz9x6L1qdFemEVMMmo8dgJ5tEZM3dH4joAX7bMbUG3OaU8bOIOgZxja5Cj6LlTDr%2FtnGhlnDhHw5aT15RjuqTOBJ62Px4DnEtXddiDq8y07mdVJ20msoO4N%2BvttTFS9BVdXBgL2tvV%2B55DCwbCzJheZ2%2B9Fxta70d10ZiafWyWpgMeA99aSiRcsg6uWanTD7Lm1zEFQipkWsoDGTbDXvEqvb6KF2o%2BJhj3oLn0Ndenr0Ft7EggH4vu4ucOKSDIBN0e4KKilf05KU%2Ffph2gBNsLVfoA1LiKLIC3nXbwQ4hou4gFq6w64W6JMkIkRcwRtqAy%2ByQ4EtYmjkXAg%2FqnEmwnc1E5wvA1q%2Bt8LT5c9s%2BM8o5ovh%2BX89h7xc1f7IQK%2FmReBqa5Udwyee3QzsiX6et0G%2BZwsTschWohycA%2FAYg2R8OwAv8aOUNzZc19HurFhuJhTmWg9pI5aSAkfwwp6bOA0qPWXgEtbZ8u7rGnWuGjeSS7AjFBa1FIPbDcWa4NYjLvrhFhCJBy8kakKBnsDwC%2FroujlL0JN%2ByQ8uUstU4wQU%2FrD0w9%2Bj31eXfarqEl7Dm0Fv4ezOw%2Be3lw4W%2FdJgLQbgdHZvJ0XgsEzUxQrYEuyWt6HpHFT22Ftcr0nd6G0k80yNDBaD6s5WhfB%2FKEQkZqyU68ja8dDyN65AvaxAcjrAY2sY2yNf7KdMkEWpmrZBTYa9cEOXgBxF09fEbg%2FkCj4aaB0DYdCpq8nBpxHuBisjGmn%2FxO0sl%2Bbphij6RhrIRbHnRjZitr9AEZ6G2ZOIBsy1NgM3T5mD7r6yNRPEXDiC83Szo5qn9JoUI%2ByPiQO%2FvpNnbeHxL%2Fz7pIrD%2FIlogHecmYSwwULP23AHCziq2NoELa2dkuscPXVY7J6s5TEnCHYCjhlcvywgJ%2FlyB7r3xUvSe9connmlxFyXLqmGzB%2FrP1COnJ3PUDyIFrPG9MTAj6s9FdVIRQIWIb8bR098IwPQbuUSXRZKkTOBGIBIa%2Fjs4kseuKU1fRv%2BiE%2BF8rzqSr31E%2BvvOYTRebNXWo5I304LlZqC3bCjLjjFy9iqr%2FfSmMjESpwGhAKclDyK5QiORMYmqcCqfOI5RDvbIKPPTuW8a8c1ORYpV75GvfMEwI%2B2tcsPbiCvY%2BgjCYsQpz2fD7SdjWuvLmg368MNzWBf98sjx1NewyNc29gPbhwmvn92QNvDWwD56OBLW%2BZUXsfxNVBxwJ3TAzKkEFh6qNynMtHFsPtKarg7ObnzBvTXS5ltK1t2pXCYQp%2B1SVGX0Byv0R7v6N31js68YmLAE%2FsjKgJxqu5lJJDvyDwq1F08Glcqi%2FDGAG%2FMvJKYBsdxWSvCSoiQXCkpQPeiU7O90J4pEpsfRdhv2dWGxuWx5R4G941UtkSI383JAycGxOVWW9J%2F61g32rUnNyFkC%2BgxAM%2B0dMD16jNsigjZPqhYFjxjtUZjZHdQne1gZJZnY6%2B4jTwm%2BLbEtEzvsARPQETm0kjrRUnjOfIPMCR3QQWs0hs5l4ydwvw5mYEdK%2F8rXZnSa%2Bf0xtfAy5Lz362gEc4lTFpMebaFiJM1VQiudTUJHVZCfiD0mvn7itbAYCY%2FXRuWXGAi1kMtzsa7Pyq4mrbx%2BbOHN%2BI8gEz2M428M9CzfyGHI6NBLSEfsTUhOoYs3NgK9j7MIrffwaaap93JbkI%2BiSix0R6W0cHdIdT8rd1JzdFTF631Zlan0VTv7CBgP9z9NTRuV%2FGUtUE%2FLwq5x3O5aJ5W18L4kV0W3t7DHDO955JpqymBUn7m6O7VH5CbGIfonOjwW0P%2BfjHWevXPbppaoLoqtFnX25uK1kKGonoly7hSkvgKO%2B2jcX067jK40jPvu7pL77hRzFYeXrbcZlXZcrKEX7mvYSBGw%2FWeZRPKcu2ksc5XmNagwnQZbPZrwRuJ3bnHB42F2SGHwz0wHbuZW55STXHLnAjJh%2FzcAse7mHhRUjcnKzRu75oL%2FL2%2FFh4e5sR3U0t2qYjuhU4g7YPDMRYgss2geHqXKjtu2CvI5fsTkPkBk41xp76T%2FsLkj%2FmVtN1r%2Bg0Px%2Fs5C0lfvwCBbpV01vI4XCYAxtH9BjgbrICsoYY4D43M8AueEcvGO2uTWbzgu%2FxBoH3nyPQf0nyVzyQf%2F3AL8sUVKgQ%2BBXE5H4KHhsNUToKB0NUlzci3ncosK3hAHdl%2BgsHg7RYzTJPr3YdJ3KzHu6OwwibRQwiNwK8jED%2FiZwDN7eKkDhwK3cf65cAV0QH83NSfoiO6kz4VI8y2tqGeLsgusOhjHXMUFwruWmCX%2FcpIe%2FkPG5mygbneLPpkjeo8VP8gKovIjjejtnqfnbV5iE7ZRkFuXVCY2uz98A1YjOaFCEr13er04tCEkNxnSPRoKbbGmW7i1vYYSvfSBy4eWxSzfo6glM9swaczZtPP%2FC5l%2BKDzyF721LwYsQbEvRrGhUqLXHdgCs8dgPzO2pPFuzVL0IfrUbCwC0n%2Fy%2FmGG3l28EnFG4UuHVOVlXKTvxeujMlh56TB2o1lx1B0O%2B1aJVr95Gm5rjAZVGap9%2BzzO%2BEvM6EmpTTwPiIJDcWmbl5aAgg5B6ZDeAWUDpR1%2FJTr8gj1HhSihsWFWmvwT7WNwMmECAO3whxgVgL4vfM9pWIb6oLU9W%2FgTZ4NiGtRyOmbp8njzNJ%2BzujQFmAsGfMfuPAY8EHfBrndwJ%2Fl5HmHpaubGvFcWjuyTUAyMfbGbjFDUytc7NSdzqtmaCvkEtY2aK6OvgZUhRdtc5MuI9GO6uezG%2FQdUmClVniOx59beX8FBLWOl2fFE7Pj2RpqTgmw0R%2Brxb3u1NEcx1DQxYyxANM3LRQe3NwFcAWCmycOBokLS9i0MbzIJYhnFBvO3GfZ%2FG4Jo7ymTfWOhMd7tNxHS%2FjJOmv42I9aZLSYSjonymknC5lrLNrGnjYjE%2BOXkxRoPM7TZIU5N%2BK6bPz550Tg9ZnLaoZnyHw3yTgd5HG%2F3%2BAX8nBWfhGWsqOkuk%2FKYVNPpEdFg6EhamP4HzGG2i%2FkIHxoU64JkZAndm4mvUNl8HTdTjuewG%2FTn2CWjSU7gc3RC3btN6Wg0bPbWmsj8%2B%2BxOzDsQXwkwvKTr7MJa1wfL4y88vZcS%2Fx%2FhWUEX6OsmMvo6X8OHqbS8HPqRq91ITJkV5MDrVhsGIDJnoriR4PwdbfwpsaPGTMHV%2BpElUqlmLSWXDqosyqerK%2F%2FSE%2Bmsxap7PwJPTEUBd4c4JpLlsCsz9OgTwwnJ2yFJlb5olkbVmArK2LiRsskkc9ZO%2B4j16%2Fg16fL%2F39c8dflBlb19SoZVPSQmBCpGUOcJzSguOtH%2FJMaiTu9g%2BTH%2B7o2Ppb0dNUItGfj4RyS4sXhdMhxwM%2BF1uTv1202t1QJObM2uX7j%2BdisU%2FZLHwQ7oMKPzX3pj7z4eqbf9FWNM%2FSMQHiaygYYFBXsajw1TcNA0NV0MpfAF9vFvA4gZDFtIgEvvOHP%2F9%2FOwxAYp2RnIUAAAAASUVORK5CYII%3D)](http://www.compbiomed.eu/)

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

linux/OSX: [![Tests](https://img.shields.io/badge/julia%20v0.3.11-Tests%20pass-brightgreen.svg)](https://julialang.org/downloads/oldreleases.html)
[![Tests](https://img.shields.io/badge/julia%20v0.6.0-Tests%20pass-brightgreen.svg)](https://julialang.org/downloads/)

openBF is an open-source 1D blood flow solver based on MUSCL finite-volume numerical scheme, written in [Julia](https://julialang.org/downloads/) and released under [Apache 2.0](http://www.apache.org/licenses/LICENSE-2.0) free software license.


### Docs

Check the library [website](https://INSIGNEO.github.io/openBF/Docs/index.html) for documentation and tutorials.


### Models

A collection of 1D networks (from the literature) solved by means of openBF can be found in the [openBF-hub](https://github.com/alemelis/openBF-hub) repository


### Julia and openBF installation

- Obtain latest Julia release for your platform [here](https://julialang.org/downloads/); on linux
```bash
$ cd ~/Dowloads
$ wget https://julialang-s3.julialang.org/bin/linux/x64/0.6/julia-0.6.0-linux-x86_64.tar.gz
$ tar -xzvf julia-0.6.0-linux-x86_64.tar.gz
$ mv julia-0.6.0-linux-x86_64 ~/julia0.6
$ rm julia-0.6.0-linux-x86_64.tar.gz
$ echo "alias julia='~/julia0.6/bin/julia'" > ~/.bashrc
$ source ~/.bashrc
$ julia
```

- clone this repository and copy openBF source files in `.julia/v0.6/` folder; on linux
```bash
$ git clone https://github.com/INSIGNEO/openBF
$ cd openBF
$ mkdir -p ~/.julia/v0.6/openBF
$ cp -r src ~/.julia/v0.6/openBF/
$ cp main.jl ~/.julia/v0.6/openBF/
$ echo 'run(`rm main.jl`)' >> ~/.julia/v0.6/openBF/main.jl
$ mkdir -p ~/.julia/v0.6/BTypes/src
$ cp src/BTypes.jl ~/.julia/v0.6/BTypes/src/
$ echo "alias openBF='cp ~/.julia/v0.6/openBF/main.jl ./main.jl && julia main.jl $1'" >> ~/.bashrc
$ echo "alias openBF-fast='cp ~/.julia/v0.6/openBF/main.jl ./main.jl && julia --check-bounds=no --math-mode=fast main.jl $1'" >> ~/.bashrc
$ source ~/.bashrc
```

### Tests

To use openBF, clone or download this repository. Go to the chosen test `openBF/test/<testname>` folder and launch the simulation as

```
$ julia main.jl
```

This requires the following files to be in the same directory of `main.jl`:

- `<testname>.csv` contains the description of the arterial system;
- `<testname>_veins.csv` contains the description of the venous system;
- `<testname>_constants.jl` contains the simulation global variables;
- `<testname>_inlet.dat` contains the inlet BC.

The file `test/plot.py` (where available) is a simple matplotlib script to print the results.

The `main.jl` file can be copied and used as it is for different simulations. The variable `project_name` must be changed accordingly to the `.csv` files name.
