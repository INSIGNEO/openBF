<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration · openBF</title><meta name="title" content="Configuration · openBF"/><meta property="og:title" content="Configuration · openBF"/><meta property="twitter:title" content="Configuration · openBF"/><meta name="description" content="Documentation for openBF."/><meta property="og:description" content="Documentation for openBF."/><meta property="twitter:description" content="Documentation for openBF."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="openBF logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">openBF</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li class="is-active"><a class="tocitem" href>Configuration</a><ul class="internal"><li><a class="tocitem" href="#solver"><span>solver</span></a></li><li><a class="tocitem" href="#blood"><span>blood</span></a></li><li><a class="tocitem" href="#network"><span>network</span></a></li><li><a class="tocitem" href="#Boundary-conditions"><span>Boundary conditions</span></a></li><li><a class="tocitem" href="#Template"><span>Template</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/INSIGNEO/openBF" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/INSIGNEO/openBF/blob/master/docs/src/man/config.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>The first line in the configuration file contains the <code>project_name</code> variable. </p><pre><code class="language-yaml hljs">project_name: &quot;my_simulation_name&quot;</code></pre><p>This is a string that will be used to name the results folder. At the end of the simulation, all the results files will be found in <code>project_name_results/</code> directory.</p><pre><code class="language-yaml hljs">inlet_file: &quot;my_inlet.dat&quot;</code></pre><p>The inlet BC is given trough an ASCII file containing a list of values (pressure or volumetric flow rate) in time. For now, the inlet vessel is the one whose <code>sn</code> node is <code>1</code>.</p><p>Following the <code>write_results</code> list is defined.</p><pre><code class="language-yaml hljs">write_results: [&quot;P&quot;] # [&quot;P&quot;, &quot;Q&quot;, &quot;u&quot;, &quot;A&quot;]</code></pre><p>Here you can specify which quantities to write in the output files (<code>P</code>ressure, <code>Q</code> flow, <code>u</code> velocity and <code>A</code>rea). These are all optional but at least one is recommended.</p><p>Then there are three main sections: <code>solver</code>, <code>blood</code>, and <code>network</code>.</p><h2 id="solver"><a class="docs-heading-anchor" href="#solver">solver</a><a id="solver-1"></a><a class="docs-heading-anchor-permalink" href="#solver" title="Permalink"></a></h2><pre><code class="language-yaml hljs">solver:
  Ccfl: 0.9
  cycles: 100
  convergence_tolerance: 5.0
  jump: 100</code></pre><p>It contains the values for the numerical scheme parameters:</p><ul><li><p><code>Ccfl</code> is the Courant&#39;s number used to compute the <span>$\Delta t$</span> and it is usually taken equal to <span>$0.9$</span>.</p></li><li><p><code>cycles</code> is the maximum number of cardiac cycles to be simulated. This is used to stop openBF execution in case of non-converging simulations. An openBF simulation usually takes less than 20 cardiac cycles to converge.</p></li><li><p><code>convergence_tolerance</code> is the maximum error in <span>$mmHg$</span> allowed between two consecutive cardiac cycle to claim convergence.</p></li><li><p><code>jump</code> is the number of time-points to be saved in the result files.</p></li></ul><h2 id="blood"><a class="docs-heading-anchor" href="#blood">blood</a><a id="blood-1"></a><a class="docs-heading-anchor-permalink" href="#blood" title="Permalink"></a></h2><pre><code class="language-yaml hljs">blood:
  rho: 1060.0
  mu: 0.004</code></pre><p>Blood rheological properties:</p><ul><li><code>mu</code> dynamic viscosity in <span>$Pa \cdot s$</span>;</li><li><code>rho</code> density in <span>$kg \cdot m^{-3}$</span>.</li></ul><h2 id="network"><a class="docs-heading-anchor" href="#network">network</a><a id="network-1"></a><a class="docs-heading-anchor-permalink" href="#network" title="Permalink"></a></h2><p>This contains the list of vessels in the network. Each vessel has the following <strong>mandatory</strong> properties:</p><ul><li><code>label</code> the vessel name that will be used to name result files;</li><li><code>sn</code> segment source node;</li><li><code>tn</code> segment target node;</li><li><code>L</code> vessel lenght in <span>$m$</span>;</li><li><code>E</code> wall Young&#39;s modulus in <span>$Pa$</span>;</li><li><code>R0</code> or <code>Rp</code> and <code>Rd</code> describe the lumen radius. If <code>R0</code> is defined, the vessel is assumed to have a constant reference lumen radius; it <code>Rp</code> and <code>Rd</code> are specified, the vessel is set to taper linearly from the proximal lumen radius (i.e. <code>Rp</code>, the lumen radius at <code>sn</code>) to the distal lumen radius (i.e. <code>Rd</code>, the lumen radius at <code>tn</code>).</li></ul><p><strong>Optional</strong> parameters are:</p><ul><li><p><code>to_save</code> a boolean flag (default <code>true</code>) to tell openBF to save results for the current vessel;</p></li><li><p><code>M</code> is the number of division along the vessels used to compute the artery <span>$\Delta x$</span>. When not specified, openBF automatically meshes the arteries so that <span>$\Delta x$</span> is at least <span>$1 mm$</span>;</p></li><li><p><code>Pext</code> vessel external pressure in <span>$Pa$</span>, default <span>$0.0 Pa$</span>;</p></li><li><p><code>gamma_profile</code> is the radial velocity profile parameter used in the calculation of the viscous losses term, default <span>$2$</span> (parabolic profile).</p></li></ul><h2 id="Boundary-conditions"><a class="docs-heading-anchor" href="#Boundary-conditions">Boundary conditions</a><a id="Boundary-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-conditions" title="Permalink"></a></h2><p>The system boundary conditions (BCs) are applied to inlet vessel(s) and outlet vessel(s).</p><p>In the case a vessel outlet is not connected to any other vessel, an outlet BC must be assigned by imposing a reflection coefficient <code>Rt</code> or by coupling a <em>windkessel</em> model. In case of <code>Rt</code>:</p><ul><li><code>Rt</code> 1.0 ≤ Rt ≥ -1.0</li></ul><p>In case of two-element windkessel:</p><ul><li><code>R1</code> peripheral resistance</li><li><code>Cc</code> peripheral compliance</li></ul><p>In case of three-element windkessel:</p><ul><li><code>R1</code> first peripheral resistance</li><li><code>R2</code> second peripheral resistance</li><li><code>Cc</code> peripheral compliance</li></ul><p>You can also enable <code>inlet_impedance_matching</code> to let openBF optimise <code>R1</code> at runtime. This will match the windkessel inlet impedance and minimise artificial reflections (recommended).</p><h2 id="Template"><a class="docs-heading-anchor" href="#Template">Template</a><a id="Template-1"></a><a class="docs-heading-anchor-permalink" href="#Template" title="Permalink"></a></h2><p>The configuration file template is reported below. This contains all the mandatory and optional paramenter that can be specified in openBF. The parameter type is reported for each line after the #.</p><pre><code class="language-yml hljs">project_name: &lt;project name&gt; # String
inlet_file: &lt;inlet name&gt;.dat
write_results: [&quot;P&quot;] # [&quot;P&quot;, &quot;Q&quot;, &quot;u&quot;, &quot;A&quot;]

solver:
  Ccfl: &lt;Courant&#39;s number&gt; # 0.0 &lt; Ccfl ≤ 1.0; Float
  cycles: &lt;Max number of cardiac cycles&gt; # Int
  convergence_tolerance: &lt;Max RMSE between two cycles&gt; # Pressure, Float
  jump: &lt;Number of timepoints in result files; default 100&gt; # Int

blood:
  mu:  &lt;dynamic viscosity&gt; # [Pa⋅s]; Float
  rho: &lt;density&gt; # [kg/m^3]; Float

network:
  - label: &lt;vessel name&gt; # String
    sn: &lt;source node&gt; # Int
    tn: &lt;target node&gt; # Int

    L: &lt;length&gt; # [m]; Float
    M: &lt;number of divisions along the vessel; default so that Δx = L/M = 1.0mm; minimum M=5&gt; # Int (optional)
    E: &lt;wall Young&#39;s modulus&gt; # [Pa]; Float
    h0: &lt;wall thickness; default computed as h0(x) = f(R0)&gt; # [m]; Float (optional)

    R0: &lt;constant lumen radius&gt; # [m]; Float
    #------ OR ------ to assign a linear tapering
    Rp: &lt;proximal lumen radius, i.e. lumen radius at sn&gt;
    Rd: &lt;distal lumen radius, i.e. lumen radius at tn&gt;

    Pext: &lt;external pressure; default 0.0 Pa&gt; # [Pa]; Float (optional)

    gamma_profile: &lt;radial velocity profile parameter; default 9&gt; # ≥ 2.0; Float

    # outlet wk2
    R1: &lt;windkessel peripheral resistance&gt; # [Pa⋅s⋅m^-3]; Float
    Cc: &lt;compliance&gt; # [m^3⋅Pa^-1]; Float
    #------ OR ------ outlet wk3
    R1: &lt;windkessel inlet impedance&gt;
    R2: &lt;peripheral resistance&gt;
    Cc: &lt;compliance&gt;
    inlet_impedance_matching: true
    #------ OR ------ outlet reflection
    Rt: &lt;reflection coefficient&gt; # 1.0 ≤ Rt ≥ -1.0; Float</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quickstart</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 21 March 2024 13:47">Thursday 21 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
